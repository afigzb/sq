<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hover Animation Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .container {
            width: 300px;
            height: 200px;
            margin: 50px auto;
        }

        .trigger-box {
            width: 100%;
            height: 100%;
            background-color: #f0f0f0;
            cursor: pointer;
            border: 2px solid #333;
            transition: background-color 0.3s;
            position: relative;
        }

        .moving-box {
            width: 100px;
            height: 100px;
            background-color: #4CAF50;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="bg-white">
    <div class="container">
        <div class="trigger-box">
            <div class="moving-box"></div>
        </div>
    </div>

    <script>
        function createHoverAnimation(triggerSelector, movingSelector, options = {}) {
            const {
                initialMove = -20,    // 初始移动距离（像素）
                finalMove = -40,      // 最终移动距离（像素）
                transitionDuration = 300,  // 过渡时间（毫秒）
                hoverColor = '#e0e0e0'    // 悬停时的背景色
            } = options;

            const triggerElement = document.querySelector(triggerSelector);
            const movingElement = document.querySelector(movingSelector);
            let animationTimeout;

            if (!triggerElement || !movingElement) {
                console.error('Elements not found');
                return;
            }

            // 设置初始过渡时间
            movingElement.style.transition = `transform ${transitionDuration}ms ease`;

            function startAnimation() {
                // 清除之前的动画
                clearTimeout(animationTimeout);
                
                // 设置悬停背景色
                triggerElement.style.backgroundColor = hoverColor;
                
                // 初始移动
                movingElement.style.transform = `translate(-50%, calc(-50% + ${initialMove}px))`;
            }

            function completeAnimation() {
                // 最终移动
                movingElement.style.transform = `translate(-50%, calc(-50% + ${finalMove}px))`;
                
                // 设置定时器，在动画完成后复位
                animationTimeout = setTimeout(() => {
                    movingElement.style.transform = 'translate(-50%, -50%)';
                    triggerElement.style.backgroundColor = '';
                }, transitionDuration);
            }

            // 添加事件监听器
            triggerElement.addEventListener('mouseenter', startAnimation);
            triggerElement.addEventListener('mouseleave', completeAnimation);
        }

        // 使用示例
        createHoverAnimation('.trigger-box', '.moving-box', {
            initialMove: -20,
            finalMove: -40,
            transitionDuration: 300,
            hoverColor: '#e0e0e0'
        });
    </script>
</body>
</html>
