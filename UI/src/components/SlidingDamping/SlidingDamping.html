<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ»‘åŠ¨é˜»å°¼æ•ˆæœæ¼”ç¤º</title>
    <style>
        /* é‡ç½®é»˜è®¤æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* å›ºå®šbodyï¼Œé˜²æ­¢åŸç”Ÿæ»šåŠ¨ */
        body {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        /* ä¸ºdemoè®¾ç½®ä¸€äº›æ ·å¼ */
        .section {
            min-height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            font-family: Arial, sans-serif;
            color: #333;
        }

        /* äº¤æ›¿çš„èƒŒæ™¯è‰²ï¼Œç”¨äºè§†è§‰åŒºåˆ† */
        .section:nth-child(odd) {
            background-color: #f0f0f0;
        }

        .section:nth-child(even) {
            background-color: #e0e0e0;
        }

        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #007bff;
        }

        /* æ ‡é¢˜å’Œæ–‡æœ¬æ ·å¼ */
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.6;
            max-width: 800px;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        /* ä»£ç åŒºå—æ ·å¼ */
        pre {
            background: #f8f8f8;
            border-radius: 5px;
            padding: 1rem;
            overflow-x: auto;
            max-width: 800px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
        }

        code {
            font-family: 'Courier New', monospace;
        }

        /* å‚æ•°è°ƒæ•´åŒºåŸŸæ ·å¼ */
        .controls {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            margin: 1rem 0 2rem 0;
        }

        .control-group {
            margin-bottom: 1rem;
        }

        .control-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .control-group input {
            width: 100%;
            padding: 0.5rem;
        }

        .value-display {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        /* æ¼”ç¤ºåŒºå— */
        .demo-box {
            width: 100%;
            max-width: 800px;
            height: 300px;
            background: linear-gradient(135deg, #6366f1, #3b82f6);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            margin: 2rem 0;
        }

        /* æŒ‰é’®æ ·å¼ */
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
            margin: 1rem 0;
        }

        button:hover {
            background: #2563eb;
        }

        /* åŠŸèƒ½ç‰¹ç‚¹åˆ—è¡¨ */
        .features-list {
            list-style-position: inside;
            max-width: 800px;
            text-align: left;
            margin: 1.5rem 0;
        }

        .features-list li {
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        /* è§†è§‰æŒ‡ç¤ºå™¨ */
        .scroll-indicator {
            position: relative;
            width: 30px;
            height: 50px;
            border: 2px solid #333;
            border-radius: 15px;
            margin: 2rem auto;
        }

        .scroll-indicator::before {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: #333;
            border-radius: 50%;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            animation: scrollAnim 2s infinite;
        }

        @keyframes scrollAnim {
            0% {
                opacity: 1;
                top: 10px;
            }
            70% {
                opacity: 0;
                top: 30px;
            }
            100% {
                opacity: 0;
                top: 30px;
            }
        }
    </style>
    <script type="module" src="./SlidingDamping.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="logo">SlidingDamping ç»„ä»¶</div>
        <div class="nav-links">
            <a href="#intro">ä»‹ç»</a>
            <a href="#features">ç‰¹ç‚¹</a>
            <a href="#usage">ä½¿ç”¨æ–¹æ³•</a>
            <a href="#demo">å‚æ•°æ¼”ç¤º</a>
        </div>
    </nav>

    <sliding-damping damping="0.03" touch-damping="0.2" limit-speed="100" id="demoComponent">
        <section class="section" id="intro">
            <h1>SlidingDamping æ»‘åŠ¨é˜»å°¼æ•ˆæœ</h1>
            <p>è¿™æ˜¯ä¸€ä¸ªåŸºäºWeb Componentså®ç°çš„å¹³æ»‘æ»šåŠ¨ç»„ä»¶ï¼Œå®ƒæ¨¡æ‹Ÿäº†ç‰©ç†ä¸–ç•Œä¸­çš„é˜»å°¼æ»šåŠ¨æ•ˆæœï¼Œä½¿ç½‘é¡µæ»šåŠ¨æ›´åŠ è‡ªç„¶æµç•…ã€‚</p>
            <div class="scroll-indicator"></div>
            <p>è¯·å‘ä¸‹æ»šåŠ¨ä½“éªŒé˜»å°¼æ»šåŠ¨æ•ˆæœ ğŸ‘‡</p>
        </section>

        <section class="section" id="features">
            <h2>ç»„ä»¶ç‰¹ç‚¹</h2>
            <ul class="features-list">
                <li>åŸºäºç‰©ç†é˜»å°¼æ¨¡å‹ï¼Œå®ç°è‡ªç„¶æµç•…çš„æ»šåŠ¨ä½“éªŒ</li>
                <li>æ”¯æŒé¼ æ ‡æ»šè½®å’Œè§¦æ‘¸å±æ“ä½œ</li>
                <li>å¯é…ç½®é˜»å°¼ç³»æ•°ï¼Œæ»¡è¶³ä¸åŒäº¤äº’éœ€æ±‚</li>
                <li>è‡ªé€‚åº”ä¸åŒè®¾å¤‡ç±»å‹ï¼Œåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šä¹Ÿæœ‰è‰¯å¥½è¡¨ç°</li>
                <li>ä½¿ç”¨Web ComponentsæŠ€æœ¯å®ç°ï¼Œå¯åœ¨ä»»æ„æ¡†æ¶ä¸­ä½¿ç”¨</li>
                <li>æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨requestAnimationFrameå’Œwill-changeå±æ€§</li>
            </ul>
            <div class="demo-box">
                ç»§ç»­å‘ä¸‹æ»šåŠ¨æŸ¥çœ‹æ›´å¤šå†…å®¹
            </div>
        </section>

        <section class="section" id="usage">
            <h2>å¦‚ä½•ä½¿ç”¨</h2>
            <p>SlidingDamping æ˜¯ä¸€ä¸ªæ ‡å‡†çš„Web Componentï¼Œä½¿ç”¨éå¸¸ç®€å•ï¼š</p>
            <pre><code>&lt;script type="module" src="./SlidingDamping.js"&gt;&lt;/script&gt;

&lt;sliding-damping damping="0.03" touch-damping="0.2" limit-speed="100"&gt;
    &lt;!-- æ‚¨çš„å†…å®¹æ”¾åœ¨è¿™é‡Œ --&gt;
    &lt;section&gt;ç¬¬ä¸€éƒ¨åˆ†å†…å®¹&lt;/section&gt;
    &lt;section&gt;ç¬¬äºŒéƒ¨åˆ†å†…å®¹&lt;/section&gt;
&lt;/sliding-damping&gt;</code></pre>
            <p>ç»„ä»¶æ”¯æŒä»¥ä¸‹å±æ€§é…ç½®ï¼š</p>
            <ul class="features-list">
                <li><strong>damping</strong>: é¼ æ ‡æ»šè½®çš„é˜»å°¼ç³»æ•°ï¼ˆé»˜è®¤ï¼š0.03ï¼‰- å€¼è¶Šå°æ»šåŠ¨è¶Šå¹³æ»‘</li>
                <li><strong>touch-damping</strong>: è§¦æ‘¸è®¾å¤‡çš„é˜»å°¼ç³»æ•°ï¼ˆé»˜è®¤ï¼š0.15ï¼‰- å€¼è¶Šå¤§å“åº”è¶Šå¿«</li>
                <li><strong>limit-speed</strong>: æœ€å¤§æ»šåŠ¨é€Ÿåº¦é™åˆ¶ï¼ˆé»˜è®¤ï¼š100ï¼‰- é˜²æ­¢æ»šåŠ¨è¿‡å¿«</li>
            </ul>
        </section>

        <section class="section" id="demo">
            <h2>å‚æ•°è°ƒæ•´æ¼”ç¤º</h2>
            <p>è°ƒæ•´ä¸‹é¢çš„å‚æ•°ï¼Œä½“éªŒä¸åŒé˜»å°¼æ•ˆæœçš„å·®å¼‚ï¼š</p>
            <div class="controls">
                <div class="control-group">
                    <label for="dampingRange">æ»šè½®é˜»å°¼ç³»æ•° (damping)</label>
                    <input type="range" id="dampingRange" min="0.01" max="0.2" step="0.01" value="0.03">
                    <div class="value-display">å½“å‰å€¼: <span id="dampingValue">0.03</span></div>
                </div>
                <div class="control-group">
                    <label for="touchDampingRange">è§¦æ‘¸é˜»å°¼ç³»æ•° (touch-damping)</label>
                    <input type="range" id="touchDampingRange" min="0.05" max="0.5" step="0.05" value="0.2">
                    <div class="value-display">å½“å‰å€¼: <span id="touchDampingValue">0.2</span></div>
                </div>
                <div class="control-group">
                    <label for="limitSpeedRange">æœ€å¤§æ»šåŠ¨é€Ÿåº¦ (limit-speed)</label>
                    <input type="range" id="limitSpeedRange" min="50" max="200" step="10" value="100">
                    <div class="value-display">å½“å‰å€¼: <span id="limitSpeedValue">100</span></div>
                </div>
                <button id="resetButton">é‡ç½®é»˜è®¤å€¼</button>
            </div>

            <div class="demo-box">
                è°ƒæ•´å‚æ•°ååœ¨æ­¤é¡µé¢æ»šåŠ¨ä»¥ä½“éªŒä¸åŒæ•ˆæœ
            </div>
            
            <h2>å·¥ä½œåŸç†</h2>
            <p>SlidingDamping ç»„ä»¶é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°å¹³æ»‘æ»šåŠ¨æ•ˆæœï¼š</p>
            <ul class="features-list">
                <li>æ•è·æ»šè½®å’Œè§¦æ‘¸äº‹ä»¶ï¼Œè®¡ç®—ç›®æ ‡æ»šåŠ¨ä½ç½®</li>
                <li>ä½¿ç”¨é˜»å°¼ç³»æ•°å¹³æ»‘è¿‡æ¸¡å½“å‰ä½ç½®åˆ°ç›®æ ‡ä½ç½®</li>
                <li>é€šè¿‡ requestAnimationFrame åœ¨æ¯ä¸€å¸§æ›´æ–°ä½ç½®</li>
                <li>ä½¿ç”¨ CSS transform å®ç°é«˜æ€§èƒ½çš„è§†è§‰æ»šåŠ¨</li>
            </ul>
            <pre><code>// é˜»å°¼æ»šåŠ¨çš„æ ¸å¿ƒå®ç°åŸç†
_updatePosition() {
  const damping = this.isMobile && this.isDragging 
    ? this.touchDamping 
    : this.damping;
    
  // ä½¿ç”¨é˜»å°¼ç³»æ•°è®¡ç®—æ–°çš„ä½ç½®ï¼Œå®ç°å¹³æ»‘è¿‡æ¸¡
  this.currentY += (this.targetY - this.currentY) * damping;
    
  // æ›´æ–°å…ƒç´ ä½ç½®
  if (this.contentEl) {
    this.contentEl.style.transform = `translateY(${-this.currentY}px)`;
  }
}</code></pre>
        </section>

        <section class="section">
            <h2>æ„Ÿè°¢ä½¿ç”¨</h2>
            <p>SlidingDamping ç»„ä»¶ä¸ºæ‚¨çš„ç½‘ç«™æä¾›äº†ä¼˜é›…ã€è‡ªç„¶çš„æ»šåŠ¨ä½“éªŒã€‚ç»§ç»­æ¢ç´¢æ›´å¤šå¯èƒ½æ€§ï¼Œåˆ›é€ å‡ºä»¤äººæ„‰æ‚¦çš„ç”¨æˆ·ç•Œé¢ï¼</p>
            <button id="scrollToTopButton">è¿”å›é¡¶éƒ¨</button>
        </section>
    </sliding-damping>

    <script>
        // ç­‰å¾…DOMåŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', () => {
            // è·å–ç»„ä»¶å®ä¾‹
            const slidingComponent = document.getElementById('demoComponent');
            
            // è·å–æ§åˆ¶å…ƒç´ 
            const dampingRange = document.getElementById('dampingRange');
            const touchDampingRange = document.getElementById('touchDampingRange');
            const limitSpeedRange = document.getElementById('limitSpeedRange');
            
            const dampingValue = document.getElementById('dampingValue');
            const touchDampingValue = document.getElementById('touchDampingValue');
            const limitSpeedValue = document.getElementById('limitSpeedValue');
            
            const resetButton = document.getElementById('resetButton');
            const scrollToTopButton = document.getElementById('scrollToTopButton');
            
            // æ›´æ–°é˜»å°¼ç³»æ•°å’Œæ˜¾ç¤ºå€¼
            dampingRange.addEventListener('input', () => {
                const value = dampingRange.value;
                dampingValue.textContent = value;
                slidingComponent.setAttribute('damping', value);
            });
            
            touchDampingRange.addEventListener('input', () => {
                const value = touchDampingRange.value;
                touchDampingValue.textContent = value;
                slidingComponent.setAttribute('touch-damping', value);
            });
            
            limitSpeedRange.addEventListener('input', () => {
                const value = limitSpeedRange.value;
                limitSpeedValue.textContent = value;
                slidingComponent.setAttribute('limit-speed', value);
            });
            
            // é‡ç½®é»˜è®¤å€¼
            resetButton.addEventListener('click', () => {
                dampingRange.value = 0.03;
                touchDampingRange.value = 0.2;
                limitSpeedRange.value = 100;
                
                dampingValue.textContent = 0.03;
                touchDampingValue.textContent = 0.2;
                limitSpeedValue.textContent = 100;
                
                slidingComponent.setAttribute('damping', 0.03);
                slidingComponent.setAttribute('touch-damping', 0.2);
                slidingComponent.setAttribute('limit-speed', 100);
            });
            
            // è¿”å›é¡¶éƒ¨æŒ‰é’®
            scrollToTopButton.addEventListener('click', () => {
                // è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹ç»„ä»¶å†…éƒ¨çš„ targetY å±æ€§
                // åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæœ€å¥½æä¾›ä¸€ä¸ªå…¬å…±æ–¹æ³•æ¥å®ç°è¿™ä¸ªåŠŸèƒ½
                slidingComponent.targetY = 0;
            });
            
            // å¦‚æœæ˜¯æ¨¡æ‹Ÿè§¦æ‘¸è®¾å¤‡å¼€å‘ç¯å¢ƒï¼Œæ·»åŠ ä¸€ä¸ªæç¤º
            if (window.matchMedia('(pointer: coarse)').matches) {
                const touchInfo = document.createElement('div');
                touchInfo.style.position = 'fixed';
                touchInfo.style.bottom = '20px';
                touchInfo.style.right = '20px';
                touchInfo.style.background = 'rgba(0,0,0,0.7)';
                touchInfo.style.color = 'white';
                touchInfo.style.padding = '10px';
                touchInfo.style.borderRadius = '5px';
                touchInfo.style.zIndex = '9999';
                touchInfo.textContent = 'å½“å‰ä¸ºè§¦æ‘¸è®¾å¤‡æ¨¡å¼';
                document.body.appendChild(touchInfo);
            }
        });
    </script>
</body>
</html> 