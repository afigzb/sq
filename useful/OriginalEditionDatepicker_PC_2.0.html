<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”µè„‘ç«¯æ—¥æœŸé€‰æ‹©å™¨</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 p-4 sm:p-8">
    <div x-data="dateSelector()" x-init="init()" class="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-shadow duration-300 p-6">
        <!-- èƒ¶å›Šå¼æ¨¡å¼åˆ‡æ¢ -->
        <div class="flex gap-1 mb-8 p-1 bg-gray-100/50 rounded-full backdrop-blur-sm">
            <template x-for="m in ['day','week','month','year']" :key="m">
                <button 
                    @click="mode = m; initializeSelection()"
                    class="px-5 py-2.5 text-sm font-medium rounded-full transition-all duration-300 transform hover:scale-[1.02]"
                    :class="{
                        'bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-md': mode === m,
                        'text-gray-500 hover:text-gray-700 hover:bg-gray-200/50': mode !== m
                    }"
                    x-text="m === 'day' ? 'æ—¥' : m === 'week' ? 'å‘¨' : m === 'month' ? 'æœˆ' : 'å¹´'"
                ></button>
            </template>
        </div>

        <!-- å¯¼èˆªå®¹å™¨ç»Ÿä¸€æ ·å¼ -->
        <template x-if="['day','week','month'].includes(mode)">
            <div class="flex items-center justify-between mb-8 bg-gray-50/80 p-3 rounded-xl backdrop-blur-sm border border-gray-100">
                <div class="flex gap-1">
                    <button @click="changeYear(-1)" class="p-2.5 rounded-xl hover:bg-gray-200/50 transition-colors">
                        <span class="text-xl text-gray-600 hover:text-blue-600 transition-colors">&laquo;</span>
                    </button>
                    <button @click="changeMonth(-1)" class="p-2.5 rounded-xl hover:bg-gray-200/50 transition-colors">
                        <span class="text-xl text-gray-600 hover:text-blue-600 transition-colors">&lsaquo;</span>
                    </button>
                </div>
                
                <div class="flex items-baseline gap-2 text-lg font-semibold">
                    <span x-text="displayYear" class="text-blue-600 text-xl"></span>
                    <span class="text-gray-500">å¹´</span>
                    <span x-text="monthNames[displayMonth]" class="text-gray-700 ml-2"></span>
                </div>

                <div class="flex gap-1">
                    <button @click="changeMonth(1)" class="p-2.5 rounded-xl hover:bg-gray-200/50 transition-colors">
                        <span class="text-xl text-gray-600 hover:text-blue-600 transition-colors">&rsaquo;</span>
                    </button>
                    <button @click="changeYear(1)" class="p-2.5 rounded-xl hover:bg-gray-200/50 transition-colors">
                        <span class="text-xl text-gray-600 hover:text-blue-600 transition-colors">&raquo;</span>
                    </button>
                </div>
            </div>
        </template>
        <!-- å¹´è§†å›¾å¯¼èˆª -->
        <template x-if="mode === 'year'">
            <div class="flex items-center justify-between mb-6 bg-gray-50 p-3 rounded-lg">
                <div class="gap-2">
                    <button @click="prevRange" class="p-2 rounded-lg hover:bg-gray-100">
                        <span class="text-xl text-gray-600">&laquo;</span>
                    </button>
                    <button @click="changeYear(-1)" class="p-2 rounded-lg hover:bg-gray-100">
                        <span class="text-xl text-gray-600">&lsaquo;</span>
                    </button>
                </div>
                <div class="flex items-baseline gap-2 text-lg font-semibold">
                    <span x-text="displayYear" class="text-blue-600 text-xl"></span>
                    <span class="text-gray-500">å¹´</span>
                    <span x-text="monthNames[displayMonth]" class="text-gray-700 ml-2"></span>
                </div>
                <div class="gap-2">
                    <button @click="changeYear(1)" class="p-2 rounded-lg hover:bg-gray-100">
                        <span class="text-xl text-gray-600">&rsaquo;</span>
                    </button>
                    <button @click="nextRange" class="p-2 rounded-lg hover:bg-gray-100">
                        <span class="text-xl text-gray-600">&raquo;</span>
                    </button>
                </div>
            </div>
        </template>

        <!-- æ—¥/å‘¨è§†å›¾ç½‘æ ¼ä¼˜åŒ– -->
        <template x-if="['day','week'].includes(mode)">
            <div class="grid grid-cols-7 gap-1 mb-6">
                <template x-for="day in weekDays" :key="day">
                    <div class="text-center text-sm font-semibold text-gray-500 py-3.5 
                              bg-gray-50/80 backdrop-blur-sm rounded-t-lg border-b border-gray-100">
                        <span x-text="day"></span>
                    </div>
                </template>
                
                <template x-for="dayInfo in daysInMonth" :key="`${dayInfo.year}-${dayInfo.month}-${dayInfo.day}`">
                    <div 
                        @click="select(dayInfo)"
                        class="relative aspect-square flex items-center justify-center 
                              transition-all duration-300 hover:z-10 hover:shadow-lg cursor-pointer
                              border border-gray-100/50 bg-white/80 backdrop-blur-sm
                              hover:bg-blue-50/50 hover:border-blue-200/50"
                        :class="{
                            'text-gray-300': !dayInfo.isCurrentMonth,
                            '!bg-gradient-to-br from-blue-600 to-blue-500 !text-white !border-transparent !shadow-md': isSelectedDate(dayInfo),
                            'ring-2 ring-blue-200/50 ring-inset': mode === 'week' && isDateInSelectedWeek(dayInfo)
                        }"
                    >
                        <span x-text="dayInfo.day" class="relative z-10"></span>
                        <template x-if="dayInfo.day === selectedData.day && dayInfo.isCurrentMonth">
                            <div class="absolute bottom-2 w-2 h-2 bg-white/80 rounded-full shadow-sm"></div>
                        </template>
                    </div>
                </template>
            </div>
        </template>

        <!-- æœˆè§†å›¾ä¼˜åŒ– -->
        <template x-if="mode === 'month'">
            <div class="grid grid-cols-3 gap-3">
                <template x-for="(month, index) in monthNames" :key="index">
                    <button 
                        @click="updateSelection('month', index)"
                        class="p-5 text-center rounded-xl transition-all duration-300 
                               border border-gray-100 hover:border-blue-200/50 hover:shadow-md
                               backdrop-blur-sm bg-white/80 hover:bg-blue-50/50"
                        :class="{
                            '!bg-gradient-to-br from-blue-600 to-blue-500 !text-white !border-transparent !shadow-md': displayMonth === index
                        }"
                        x-text="month"
                    ></button>
                </template>
            </div>
        </template>

        <!-- å¹´è§†å›¾ä¼˜åŒ– -->
        <template x-if="mode === 'year'">
            <div class="space-y-4">
                <div class="grid grid-cols-3 sm:grid-cols-5 gap-3">
                    <template x-for="year in yearRange" :key="year">
                        <button 
                            @click="updateSelection('year', year)"
                            class="p-4 rounded-xl transition-all duration-300 hover:scale-[1.03] 
                                   border border-gray-100 backdrop-blur-sm bg-white/80
                                   hover:shadow-md hover:border-blue-200/50 relative"
                            :class="{
                                '!bg-gradient-to-br from-blue-600 to-blue-500 !text-white !border-transparent !shadow-lg': displayYear === year,
                                '!border-dashed !border-blue-300': year === selectedData.year.time
                            }"
                        >
                            <span class="text-sm font-medium" x-text="year"></span>
                            
                            <template x-if="year === selectedData.year.time">
                                <div class="absolute top-0 right-0 -translate-y-1/2 translate-x-1/2">
                                    <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center 
                                              shadow-sm border border-blue-200/50">
                                        <div class="w-2 h-2 bg-blue-600 rounded-full"></div>
                                    </div>
                                </div>
                            </template>
                        </button>
                    </template>
                </div>
            </div>
        </template>

        <!-- åº•éƒ¨ä¿¡æ¯ä¼˜åŒ– -->
        <div class="mt-8 pt-6 border-t border-gray-100/50">
            <template x-if="mode !== 'week'">
                <div class="text-sm font-medium text-gray-600 bg-blue-50/50 p-4 rounded-xl 
                          backdrop-blur-sm border border-blue-100/50 shadow-inner">
                    ðŸ“… <span class="text-blue-600 font-semibold" 
                          x-text="`${selectedData.year.time}-${String(selectedData.month+1).padStart(2,'0')}-${String(selectedData.day).padStart(2,'0')}`"></span>
                </div>
            </template>
            <template x-if="mode === 'week'">
                <div class="text-sm font-medium text-blue-600 bg-blue-50/50 p-4 rounded-xl 
                          backdrop-blur-sm border border-blue-100/50 shadow-inner" 
                     x-text="selectedData.week?.range"></div>
            </template>
        </div>
    </div>
</body>

<script>
    function dateSelector(mode = 'day') {
        function convertToEastEightZone(date) {
            if (!(date instanceof Date) || isNaN(date.getTime())) {
                date = new Date();
            }
            const utcDate = Date.UTC(date.getFullYear(), date.getMonth(), date.getDate());
            return new Date(utcDate + 8 * 60 * 60 * 1000);
        }

        return {
            displayYear: new Date().getFullYear(), // å½“å‰å¹´ä»½
            displayMonth: new Date().getMonth(),   // å½“å‰æœˆä»½ï¼ˆ0-11ï¼Œ0ä»£è¡¨ä¸€æœˆï¼‰
            displayDay: new Date().getDate(),      // å½“å‰æ—¥æœŸ
            selectedData: null,                    // å­˜å‚¨é€‰æ‹©å™¨çš„é€‰ä¸­æ•°æ®
            weekDays: ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'], // è°ƒæ•´ä¸ºå‘¨ä¸€åˆ°å‘¨æ—¥
            monthNames: ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ'], 
            daysInMonth: [], 
            blankDays: [],  
            mode,            // å½“å‰é€‰æ‹©å™¨æ¨¡å¼ï¼šå¯ä»¥æ˜¯ 'day'ï¼ˆæ—¥æœŸæ¨¡å¼ï¼‰ã€'month'ï¼ˆæœˆä»½æ¨¡å¼ï¼‰ã€'week'ï¼ˆå‘¨æ¨¡å¼ï¼‰ã€'year'

            // åˆå§‹åŒ–å‡½æ•°ï¼Œè®¡ç®—æœˆä»½çš„å¤©æ•°å¹¶è®¾ç½®é»˜è®¤é€‰æ‹©é¡¹
            init() {
            this.selectedData = {
                year: {
                    time: this.displayYear,
                    startYear: this.displayYear - Math.abs(this.displayYear % 10) - 10,
                    endYear: (this.displayYear - Math.abs(this.displayYear % 10)) + 9
                },              
                month: this.displayMonth,
                day: this.displayDay,
                week: null,
            };
            this.setSelectedWeek();
            this.calculateMonthDays();
            this.initializeSelection();
        },
            // æŽ§åˆ¶æŽ§ä»¶æ˜¾ç¤ºç›¸å…³é€»è¾‘
            showOptions: false, // æŽ§åˆ¶é€‰é¡¹æ˜¾ç¤º
            calendarMode: null, // å½“å‰æ—¥åŽ†æ¨¡å¼
            calendarShow: false,// æ—¥åŽ†æ˜¾ç¤ºçŠ¶æ€
            // é€‰ç€æ¨¡å¼ï¼Œå…³é—­é€‰é¡¹å¡ï¼Œæ‰“å¼€æ—¥åŽ†
            selectMode(mode) {
                this.calendarMode = mode;
                this.calendarShow =true;
                this.showOptions = false; // å…³é—­é€‰é¡¹æ˜¾ç¤º
            },

            // åˆ‡æ¢æ¨¡å¼æ—¶è°ƒç”¨è¯¥å‡½æ•°,å¹¶è¿”å›žè¿”å›žå€¼è¿›è¡Œåˆ¤æ–­
            modeChange(changeMode='day',_mode='day'){
                this.mode=changeMode;
                this.calculateMonthDays();
                return this.mode==_mode;
            },

            // åˆå§‹åŒ–é€‰æ‹©é¡¹ï¼Œæ ¹æ®é€‰æ‹©å™¨çš„æ¨¡å¼è®¾ç½®åˆå§‹é€‰ä¸­çŠ¶æ€
            initializeSelection() {
                // åŒæ­¥displayåˆ°å½“å‰é€‰ä¸­çš„å€¼
                this.displayYear = this.selectedData.year.time;
                this.displayMonth = this.selectedData.month;
                this.displayDay = this.selectedData.day;

                const handlers = {
                    day: () => this.selectedData.day = this.displayDay,
                    week: () => this.setSelectedWeek(new Date(this.displayYear, this.displayMonth, this.displayDay)),
                    month: () => this.selectedData.month = this.displayMonth,
                    year: () => this.selectedData.year.time = this.displayYear,
                };
                handlers[this.mode]?.();
                this.calculateMonthDays();
            },

            // è®¡ç®—å½“å‰æœˆä»½çš„å¤©æ•°å’Œç©ºç™½å¤©æ•°
            calculateMonthDays() {
                const currentYear = this.displayYear;
                const currentMonth = this.displayMonth;
                const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
                
                // è®¡ç®—å½“å‰æœˆç¬¬ä¸€å¤©åœ¨å‘¨ä¸€åˆ°å‘¨æ—¥ä¸­çš„ä½ç½®ï¼ˆå‘¨ä¸€=0ï¼Œå‘¨æ—¥=6ï¼‰
                const firstDayWeekday = (firstDayOfMonth.getDay() + 6) % 7;
                // è®¡ç®—éœ€è¦æ˜¾ç¤ºçš„ä¸Šä¸ªæœˆå¤©æ•°
                const prevMonthDays = Array.from({length: firstDayWeekday}, (_, i) => {
                    const day = new Date(currentYear, currentMonth, -firstDayWeekday + i + 1);
                    return {
                        day: day.getDate(),
                        month: day.getMonth(),
                        year: day.getFullYear(),
                        isCurrentMonth: false
                    };
                });

                // å½“å‰æœˆå¤©æ•°
                const currentMonthDays = new Date(currentYear, currentMonth + 1, 0).getDate();
                const currentDays = Array.from({length: currentMonthDays}, (_, i) => ({
                    day: i + 1,
                    month: currentMonth,
                    year: currentYear,
                    isCurrentMonth: true
                }));

                // è®¡ç®—éœ€è¦æ˜¾ç¤ºçš„ä¸‹ä¸ªæœˆå¤©æ•°
                const totalDays = prevMonthDays.length + currentDays.length;
                const nextMonthDays = Array.from({length: 42 - totalDays}, (_, i) => {
                    const day = new Date(currentYear, currentMonth + 1, i + 1);
                    return {
                        day: day.getDate(),
                        month: day.getMonth(),
                        year: day.getFullYear(),
                        isCurrentMonth: false
                    };
                });

                this.daysInMonth = [...prevMonthDays, ...currentDays, ...nextMonthDays];
            },

            // æ”¹å˜å½“å‰æœˆä»½ï¼ˆå‘å‰æˆ–å‘åŽåˆ‡æ¢ï¼‰
            changeMonth(offset) {
                const newMonth = this.displayMonth + offset;
                
                // ç¡®ä¿æœˆä»½åœ¨ 0 åˆ° 11 èŒƒå›´å†…
                this.displayMonth = (newMonth + 12) % 12;

                // è®¡ç®—å¹´ä»½çš„å˜åŒ–
                const monthOverflow = Math.floor(newMonth / 12); // ç¡®å®šå¹´ä»½æ˜¯å¦æº¢å‡º
                this.displayYear += monthOverflow;

                this.calculateMonthDays();

                // æ ¹æ®å½“å‰æœˆä»½æ˜¯å¦ä¸Žé€‰ä¸­çš„æœˆä»½ä¸€è‡´ï¼Œå†³å®šæ˜¯å¦é‡ç½®æ˜¾ç¤ºæ—¥æœŸ
                this.displayDay = (this.displayMonth === this.selectedData.month) ? this.selectedData.day : null;
            },

            // æ”¹å˜å½“å‰å¹´ä»½
            changeYear(offset) {
                this.displayYear += offset;
                this.calculateMonthDays();
                if(this.displayYear>this.selectedData.year.endYear)
                {
                    this.nextRange();
                }
                else if(this.displayYear<this.selectedData.year.startYear)
                {
                    this.prevRange();
                }
                // å¦‚æžœå¹´ä»½æ”¹å˜ï¼Œé‡ç½®æœˆä»½
                // this.displayMonth = (this.displayYear !== this.selectedData.year.time) ? null : this.selectedData.month;
            },


            // èŒƒå›´æ”¹å˜å¹´ä»½
            prevRange() {
                this.selectedData.year.startYear -= 20;
                this.selectedData.year.endYear -= 20;
            },
            nextRange() {
                this.selectedData.year.startYear += 20;
                this.selectedData.year.endYear += 20;
            },
            get yearRange() {
                // è®¡ç®—å½“å‰èŒƒå›´å†…çš„å¹´ä»½åˆ—è¡¨
                return Array.from({ length: this.selectedData.year.endYear - this.selectedData.year.startYear + 1 }, (_, i) => this.selectedData.year.startYear + i);
            },

            // ä¿®æ”¹åŽçš„é€‰æ‹©æ–¹æ³•
            select(dayInfo) {
                // å¤„ç†è·¨æœˆç‚¹å‡»æ—¶ç›´æŽ¥æ›´æ–°æ˜¾ç¤ºçš„å¹´æœˆ
                if (!dayInfo.isCurrentMonth) {
                    this.displayYear = dayInfo.year;
                    this.displayMonth = dayInfo.month;
                    this.calculateMonthDays();
                }
                
                // æ›´æ–°æ˜¾ç¤ºæ—¥æœŸ
                this.displayDay = dayInfo.day;
                
                // ç»Ÿä¸€ä½¿ç”¨ç‚¹å‡»æ—¥æœŸçš„å®žé™…å¹´æœˆæ—¥æ¥è®¾ç½®å‘¨
                const actualDate = new Date(dayInfo.year, dayInfo.month, dayInfo.day);
                this.setSelectedWeek(actualDate);
                
                // æ›´æ–°é€‰ä¸­æ•°æ®
                this.updateSelection(this.mode, dayInfo.day);
            },
            updateSelection(type, data) {
                // æ ¼å¼åŒ–æ•°å­—
                const formatNumber = (num) => String(num).padStart(2, '0');

                // æ›´æ–°é€‰æ‹©æ•°æ®å¹¶è‡ªåŠ¨é€‰å–å¯¹åº”å‘¨
                const updateCommonData = () => {
                    this.selectedData.year.time = this.displayYear; // ç¡®ä¿å¹´ä»½åŒæ­¥
                    this.selectedData.month = this.displayMonth;    // æœˆä»½åŒæ­¥
                    this.selectedData.day = this.displayDay;        // æ—¥æœŸåŒæ­¥
                    this.setSelectedWeek(new Date(this.displayYear, this.displayMonth, this.displayDay));
                };
                

                // æ£€æŸ¥æ—¥æœŸæ˜¯å¦è¶Šç•Œå¹¶è¿›è¡Œä¿®æ­£
                const correctDayForMonth = (year, month, day) => {
                    const daysInMonth = new Date(year, month + 1, 0).getDate();
                    return Math.min(day, daysInMonth); // è¿”å›žä¸è¶…è¿‡è¯¥æœˆæœ€å¤§å¤©æ•°çš„æ—¥å­
                };

                // æ—¥å¿—è®°å½•åŠŸèƒ½
                const logSelectionData = (label, value) => {
                    this.logSelection(label, value);
                };

                // æ›´æ–°æ—¥æœŸä¿¡æ¯
                const updateDateSelection = (year, month, day) => {
                    this.displayYear = year || this.displayYear;
                    this.displayMonth = month >= 0 && month < 12 ? month : this.displayMonth;
                    this.displayDay = correctDayForMonth(this.displayYear, this.displayMonth, day || this.displayDay);
                    this.selectedData.day = this.displayDay;
                    updateCommonData();
                };

                // æ›´æ–°é€‰æ‹©ä¿¡æ¯
                const updateSelectionByType = (type, data) => {
                    let label, formattedDate;
                    switch (type) {
                        case 'day':
                            updateDateSelection(this.displayYear, this.displayMonth, data);
                            label = 'æ—¥æœŸ';
                            formattedDate = `${this.displayYear}-${formatNumber(this.displayMonth + 1)}-${formatNumber(this.displayDay)}`;
                            break;
                        case 'month':
                            const oldMonth = this.displayMonth;
                            this.displayMonth = data;
                            // å¤„ç†å¹´ä»½è‡ªåŠ¨è°ƒæ•´
                            if (oldMonth === 11 && data === 0) {
                                this.displayYear += 1;
                            } else if (oldMonth === 0 && data === 11) {
                                this.displayYear -= 1;
                            }
                            this.displayDay = correctDayForMonth(this.displayYear, this.displayMonth, this.displayDay);
                            this.selectedData.month = this.displayMonth;
                            this.selectedData.year.time = this.displayYear;
                            this.calculateMonthDays();
                            break;
                        case 'year':
                            updateDateSelection(data, this.displayMonth, this.displayDay);
                            label = 'å¹´ä»½';
                            formattedDate = `${this.displayYear}-${formatNumber(this.displayMonth + 1)}-${formatNumber(this.displayDay)}`;
                            break;
                        case 'week':
                            this.selectedData.day = data;
                            this.displayDay = data;
                            updateCommonData();
                            label = 'å‘¨';
                            formattedDate = this.selectedData?.week?.range;
                            break;
                        default:
                            console.error(`æœªçŸ¥çš„é€‰æ‹©ç±»åž‹: ${type}`);
                            return; // é‡åˆ°é”™è¯¯çš„ç±»åž‹ç›´æŽ¥è¿”å›ž
                    }

                    if (label && formattedDate) {
                        logSelectionData(label, formattedDate);
                    }
                };

                // æ‰§è¡Œé€‰æ‹©æ“ä½œ
                updateSelectionByType(type, data);
            },


            // è®¾ç½®é€‰ä¸­å‘¨çš„èŒƒå›´ï¼ˆå¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸï¼‰
            setSelectedWeek(date) {
                const offsetDate = convertToEastEightZone(date);
                const dayOfWeek = offsetDate.getUTCDay();
                const offset = (dayOfWeek === 0 ? 6 : dayOfWeek - 1); // å‘¨ä¸€å¼€å§‹
                
                // è®¡ç®—å‘¨èŒƒå›´æ—¶ä½¿ç”¨å®žé™…ç‚¹å‡»æ—¥æœŸçš„å¹´æœˆ
                const startOfWeek = new Date(offsetDate);
                startOfWeek.setUTCDate(offsetDate.getUTCDate() - offset);
                
                const endOfWeek = new Date(startOfWeek);
                endOfWeek.setUTCDate(startOfWeek.getUTCDate() + 6);

                // ç¡®ä¿å‘¨èŒƒå›´æ˜¾ç¤ºæ­£ç¡®çš„å¹´æœˆ
                this.selectedData.year.time = offsetDate.getUTCFullYear();
                this.selectedData.month = offsetDate.getUTCMonth();
                this.selectedData.day = offsetDate.getUTCDate();

                // æ ¼å¼åŒ–èŒƒå›´æ—¶æ˜¾ç¤ºå®Œæ•´çš„å¹´æœˆä¿¡æ¯
                const format = d => `${d.getUTCFullYear()}-${String(d.getUTCMonth()+1).padStart(2,'0')}-${String(d.getUTCDate()).padStart(2,'0')}`;
                this.selectedData.week = { 
                    range: `${format(startOfWeek)} è‡³ ${format(endOfWeek)}`,
                    start: startOfWeek,
                    end: endOfWeek
                };
            },

            // æ‰“å°é€‰ä¸­çš„ç±»åž‹å’Œå€¼ï¼ˆè°ƒè¯•ç”¨ï¼‰
            logSelection(type, value) {
                console.log(`é€‰ä¸­${type}: ${value}`);
            },

            // æ£€æŸ¥æŸæ—¥æœŸæ˜¯å¦å±žäºŽé€‰ä¸­çš„å‘¨èŒƒå›´
            isDateInSelectedWeek(dayInfo) {
                if (this.mode !== 'week' || !this.selectedData.week) return false;
                
                // ä½¿ç”¨æ—¥æœŸå¯¹è±¡çš„å®Œæ•´ä¿¡æ¯è¿›è¡Œæ¯”è¾ƒ
                const clickedDate = new Date(dayInfo.year, dayInfo.month, dayInfo.day);
                const dateToCheck = convertToEastEightZone(clickedDate);
                
                return dateToCheck >= this.selectedData.week.start && 
                    dateToCheck <= this.selectedData.week.end;
            },
            isSelectedDate(dayInfo) {
                return dayInfo.year === this.selectedData.year.time &&
                        dayInfo.month === this.selectedData.month &&
                        dayInfo.day === this.selectedData.day;
            },
        };
    }
</script>
  
  
</html>

